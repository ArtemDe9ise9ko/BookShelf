{"ast":null,"code":"import { SimpleChanges } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { checkYearValidity, titleCaseValidator } from '../../../tools/Validator/Validator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../book-shelf.component\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction UpdateBookModalComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Title required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Title should started from Uppercase value.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Page Count required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Page Count no more than 100,000.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Page Count no less than 2.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Publish Date required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Publish Date should consist max of 10-digit.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Publish Date has invalid format. Make sure what write all data right.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Description required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UpdateBookModalComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Description no more than 300 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"invalid-border\": a0\n  };\n};\n\nexport let UpdateBookModalComponent = /*#__PURE__*/(() => {\n  class UpdateBookModalComponent {\n    constructor(http, baseUrl, bookShelf, formBuilder) {\n      this.http = http;\n      this.baseUrl = baseUrl;\n      this.bookShelf = bookShelf;\n      this.formBuilder = formBuilder;\n      this.showValidationErrors = false;\n      this.book = {};\n      this.editBookForm = this.updateFormGroup();\n    }\n\n    ngOnChanges(changes) {\n      var _a, _b, _c, _d;\n\n      if (changes.book) {\n        this.editBookForm.patchValue({\n          title: (_a = this.book) === null || _a === void 0 ? void 0 : _a.title,\n          description: (_b = this.book) === null || _b === void 0 ? void 0 : _b.description,\n          pageCount: (_c = this.book) === null || _c === void 0 ? void 0 : _c.pageCount,\n          publishDate: (_d = this.book) === null || _d === void 0 ? void 0 : _d.publishDate\n        });\n      }\n    }\n\n    updateFormGroup() {\n      console.log(this.book);\n      return this.formBuilder.group({\n        title: [this.book.title, [Validators.required, titleCaseValidator]],\n        description: [this.book.description, Validators.required],\n        pageCount: [this.book.pageCount, [Validators.required, Validators.max(100000), Validators.min(2)]],\n        publishDate: [this.book.publishDate, [Validators.required, Validators.maxLength(10), checkYearValidity]]\n      });\n    }\n\n    get editBook() {\n      return this.editBookForm.value;\n    }\n\n    updateBook() {\n      this.showValidationErrors = true;\n\n      if (this.editBookForm.invalid) {\n        return;\n      }\n\n      this.http.post(this.baseUrl + 'BookShelf/UpdateBook', this.editBook).subscribe(() => {\n        this.bookShelf.loadBooks();\n        this.editBookForm.reset();\n        this.showValidationErrors = false;\n      }, error => {\n        console.error(error);\n      });\n    }\n\n  }\n\n  UpdateBookModalComponent.ɵfac = function UpdateBookModalComponent_Factory(t) {\n    return new (t || UpdateBookModalComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.BookShelfComponent), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n\n  UpdateBookModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UpdateBookModalComponent,\n    selectors: [[\"app-update-book-modal\"]],\n    inputs: {\n      book: \"book\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 39,\n    vars: 24,\n    consts: [[\"id\", \"editBookModal\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"close\"], [1, \"modal-body\"], [1, \"book-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"title\", \"id\", \"title\", \"formControlName\", \"title\", 3, \"ngClass\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"pageCount\", \"id\", \"pageCount\", \"formControlName\", \"pageCount\", 3, \"ngClass\"], [\"type\", \"date\", \"name\", \"publishDate\", \"required\", \"\", \"id\", \"publishDate\", \"formControlName\", \"publishDate\", 3, \"ngClass\"], [\"name\", \"description\", \"required\", \"\", \"id\", \"description\", \"formControlName\", \"description\", 3, \"ngClass\"], [\"type\", \"submit\"], [1, \"text-danger\"]],\n    template: function UpdateBookModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h5\", 4);\n        i0.ɵɵtext(5, \"Add Book\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 5)(7, \"span\");\n        i0.ɵɵtext(8, \"\\u00D7\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"form\", 7);\n        i0.ɵɵlistener(\"ngSubmit\", function UpdateBookModalComponent_Template_form_ngSubmit_10_listener() {\n          return ctx.updateBook();\n        });\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\", 9);\n        i0.ɵɵtext(13, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 10);\n        i0.ɵɵtemplate(15, UpdateBookModalComponent_div_15_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(16, UpdateBookModalComponent_div_16_Template, 2, 0, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 8)(18, \"label\", 9);\n        i0.ɵɵtext(19, \"Page Count\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 12);\n        i0.ɵɵtemplate(21, UpdateBookModalComponent_div_21_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(22, UpdateBookModalComponent_div_22_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(23, UpdateBookModalComponent_div_23_Template, 2, 0, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 8)(25, \"label\", 9);\n        i0.ɵɵtext(26, \"Publish Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 13);\n        i0.ɵɵtemplate(28, UpdateBookModalComponent_div_28_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(29, UpdateBookModalComponent_div_29_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(30, UpdateBookModalComponent_div_30_Template, 2, 0, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 8)(32, \"label\", 9);\n        i0.ɵɵtext(33, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"textarea\", 14);\n        i0.ɵɵtemplate(35, UpdateBookModalComponent_div_35_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(36, UpdateBookModalComponent_div_36_Template, 2, 0, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"button\", 15);\n        i0.ɵɵtext(38, \"Add Book\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        let tmp_1_0;\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        let tmp_8_0;\n        let tmp_9_0;\n        let tmp_10_0;\n        let tmp_11_0;\n        let tmp_12_0;\n        let tmp_13_0;\n        let tmp_14_0;\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.editBookForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(16, _c0, ctx.showValidationErrors && ((tmp_1_0 = ctx.editBookForm.get(\"title\")) == null ? null : tmp_1_0.invalid)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_2_0 = ctx.editBookForm.get(\"title\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors.required));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_3_0 = ctx.editBookForm.get(\"title\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors.invalidFormat));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(18, _c0, ctx.showValidationErrors && ((tmp_4_0 = ctx.editBookForm.get(\"pageCount\")) == null ? null : tmp_4_0.invalid)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_5_0 = ctx.editBookForm.get(\"pageCount\")) == null ? null : tmp_5_0.errors == null ? null : tmp_5_0.errors.required));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_6_0 = ctx.editBookForm.get(\"pageCount\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors.max));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_7_0 = ctx.editBookForm.get(\"pageCount\")) == null ? null : tmp_7_0.errors == null ? null : tmp_7_0.errors.min));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(20, _c0, ctx.showValidationErrors && ((tmp_8_0 = ctx.editBookForm.get(\"publishDate\")) == null ? null : tmp_8_0.invalid)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_9_0 = ctx.editBookForm.get(\"publishDate\")) == null ? null : tmp_9_0.errors == null ? null : tmp_9_0.errors.required));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_10_0 = ctx.editBookForm.get(\"publishDate\")) == null ? null : tmp_10_0.errors == null ? null : tmp_10_0.errors.maxlength));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_11_0 = ctx.editBookForm.get(\"publishDate\")) == null ? null : tmp_11_0.errors == null ? null : tmp_11_0.errors.invalidFormat));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(22, _c0, ctx.showValidationErrors && ((tmp_12_0 = ctx.editBookForm.get(\"description\")) == null ? null : tmp_12_0.invalid)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_13_0 = ctx.editBookForm.get(\"description\")) == null ? null : tmp_13_0.errors == null ? null : tmp_13_0.errors.required));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showValidationErrors && ((tmp_14_0 = ctx.editBookForm.get(\"description\")) == null ? null : tmp_14_0.errors == null ? null : tmp_14_0.errors.maxlength));\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"data-bs-dismiss\", ctx.editBookForm.valid ? \"modal\" : null);\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.FormGroupDirective, i3.FormControlName]\n  });\n  return UpdateBookModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}