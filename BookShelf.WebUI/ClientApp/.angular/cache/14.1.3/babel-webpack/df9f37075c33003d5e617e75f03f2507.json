{"ast":null,"code":"import { IBookResponse } from '../tools/Interfaces/IBook';\nimport { defineLocale } from 'ngx-bootstrap/chronos';\nimport { ukLocale } from 'ngx-bootstrap/locale';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"ngx-bootstrap/datepicker\";\n\nfunction BookShelfComponent_ng_container_34_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 5);\n    i0.ɵɵlistener(\"click\", function BookShelfComponent_ng_container_34_tr_1_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const book_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.selectBook(book_r5.bookId));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function BookShelfComponent_ng_container_34_tr_1_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const book_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.removeBook(book_r5.bookId));\n    });\n    i0.ɵɵelement(11, \"i\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function BookShelfComponent_ng_container_34_tr_1_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const book_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.getBookById(book_r5.bookId));\n    });\n    i0.ɵɵelement(13, \"i\", 18);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const book_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"selected\", book_r5.bookId === ctx_r4.selectedBookId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r5.pageCount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r5.publishDate);\n  }\n}\n\nfunction BookShelfComponent_ng_container_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BookShelfComponent_ng_container_34_tr_1_Template, 14, 6, \"tr\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.books);\n  }\n}\n\nfunction BookShelfComponent_ng_template_35_tr_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 5);\n    i0.ɵɵlistener(\"click\", function BookShelfComponent_ng_template_35_tr_0_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const book_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.selectBook(book_r11.bookId));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function BookShelfComponent_ng_template_35_tr_0_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const book_r11 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.removeBook(book_r11.bookId));\n    });\n    i0.ɵɵelement(11, \"i\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 19);\n    i0.ɵɵelement(13, \"i\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"app-update-book-modal\", 20);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const book_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"selected\", book_r11.bookId === ctx_r10.selectedBookId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r11.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r11.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r11.pageCount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r11.publishDate);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"book\", book_r11);\n  }\n}\n\nfunction BookShelfComponent_ng_template_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, BookShelfComponent_ng_template_35_tr_0_Template, 15, 7, \"tr\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.filteredBooks);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"bi-sort-up\": a0,\n    \"bi-sort-down\": a1\n  };\n};\n\nexport let BookShelfComponent = /*#__PURE__*/(() => {\n  class BookShelfComponent {\n    constructor(http, baseUrl, localeService) {\n      this.http = http;\n      this.baseUrl = baseUrl;\n      this.localeService = localeService;\n      this.books = [];\n      this.filteredBooks = [];\n      this.searchText = '';\n      this.sortDirection = 'asc';\n      this.selectedDateRange = [];\n      this.loadBooks();\n      defineLocale('uk', ukLocale);\n      this.localeService.use('uk');\n      this.bsConfig = {\n        rangeInputFormat: 'DD/MM/YYYY',\n        containerClass: 'theme-blue'\n      };\n    }\n\n    loadBooks() {\n      this.http.get(this.baseUrl + 'BookShelf/GetBooks').subscribe(result => {\n        this.books = result;\n      }, error => {\n        console.error(error);\n      });\n    }\n\n    removeBook(id) {\n      this.http.delete(this.baseUrl + 'BookShelf/DeleteBook', {\n        params: {\n          id: id\n        }\n      }).subscribe(() => {\n        this.loadBooks();\n      }, error => {\n        console.error(error);\n      });\n    }\n\n    getBookById(id) {\n      this.http.get(this.baseUrl + 'BookShelf/GetBookById', {\n        params: {\n          id: id\n        }\n      }).subscribe(result => {\n        console.log(result);\n      }, error => {\n        console.error(error);\n      });\n    }\n\n    filterBooks() {\n      if (this.searchText && this.searchText.trim() !== '') {\n        this.filteredBooks = this.books.filter(book => book.title.toLowerCase().includes(this.searchText.toLowerCase()));\n      } else {\n        this.filteredBooks = this.books;\n      }\n    }\n\n    selectBook(bookId) {\n      this.selectedBookId = bookId;\n    }\n\n    sortBooksByField(field) {\n      const sortDirection = this.sortDirection === 'asc' ? 1 : -1;\n      this.books.sort((a, b) => {\n        const valueA = a[field].toLowerCase();\n        const valueB = b[field].toLowerCase();\n\n        if (valueA < valueB) {\n          return sortDirection * -1;\n        }\n\n        if (valueA > valueB) {\n          return sortDirection;\n        }\n\n        return 0;\n      });\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    }\n\n    filterBooksByDateRange() {\n      if (this.selectedDateRange && this.selectedDateRange.length === 2) {\n        const startDate = this.selectedDateRange[0];\n        const endDate = this.selectedDateRange[1];\n        this.filteredBooks = this.books.filter(book => {\n          const publishDate = new Date(book.publishDate);\n          return publishDate >= startDate && publishDate <= endDate;\n        });\n      } else {\n        this.filteredBooks = this.books;\n      }\n    }\n\n    filterByThisMonth() {\n      const currentDate = new Date();\n      const currentMonth = currentDate.getMonth();\n      const currentYear = currentDate.getFullYear();\n      const startDate = new Date(currentYear, currentMonth, 1);\n      const endDate = new Date(currentYear, currentMonth + 1, 0);\n      this.selectedDateRange = [startDate, endDate];\n      this.filterBooks();\n    }\n\n    filterByThisYear() {\n      const currentDate = new Date();\n      const currentYear = currentDate.getFullYear();\n      const startDate = new Date(currentYear, 0, 1);\n      const endDate = new Date(currentYear, 11, 31);\n      this.selectedDateRange = [startDate, endDate];\n      this.filterBooks();\n    }\n\n  }\n\n  BookShelfComponent.ɵfac = function BookShelfComponent_Factory(t) {\n    return new (t || BookShelfComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.BsLocaleService));\n  };\n\n  BookShelfComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookShelfComponent,\n    selectors: [[\"app-book-shelf\"]],\n    inputs: {\n      book: \"book\"\n    },\n    decls: 37,\n    vars: 18,\n    consts: [[1, \"input-group\"], [1, \"start-content\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#newBookModal\", 1, \"btn\", \"btn-book-main-action\"], [\"type\", \"text\", \"placeholder\", \"Select date range\", 3, \"ngModel\", \"bsDatepicker\", \"bsConfig\", \"ngModelChange\"], [\"dp\", \"\"], [3, \"click\"], [1, \"end-content\"], [1, \"input-group-text\"], [1, \"bi\", \"bi-search\"], [\"type\", \"text\", \"placeholder\", \"Search by title\", 1, \"search-bar\", 3, \"ngModel\", \"ngModelChange\"], [\"aria-labelledby\", \"tableLabel\", 1, \"table\", \"table-striped\"], [1, \"bi\", 3, \"ngClass\"], [4, \"ngIf\", \"ngIfElse\"], [\"filteredBooksSection\", \"\"], [3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn-book-action\", \"float-end\", 3, \"click\"], [1, \"btn\", \"bi\", \"bi-x-circle-fill\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#updateBookModal\", 1, \"btn-book-action\", \"float-end\", 3, \"click\"], [1, \"btn\", \"bi\", \"bi-pencil-fill\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#editBookModal\", 1, \"btn-book-action\", \"float-end\"], [3, \"book\"]],\n    template: function BookShelfComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n        i0.ɵɵtext(3, \"Add Book\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"app-add-book-modal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\")(6, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function BookShelfComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.selectedDateRange = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"bs-datepicker\", null, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\")(10, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function BookShelfComponent_Template_button_click_10_listener() {\n          return ctx.filterByThisMonth();\n        });\n        i0.ɵɵtext(11, \"This Month\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function BookShelfComponent_Template_button_click_12_listener() {\n          return ctx.filterByThisYear();\n        });\n        i0.ɵɵtext(13, \"This Year\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 6)(15, \"span\", 7);\n        i0.ɵɵelement(16, \"i\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function BookShelfComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.searchText = $event;\n        })(\"ngModelChange\", function BookShelfComponent_Template_input_ngModelChange_17_listener() {\n          return ctx.filterBooks();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"table\", 10)(19, \"thead\")(20, \"tr\")(21, \"th\", 5);\n        i0.ɵɵlistener(\"click\", function BookShelfComponent_Template_th_click_21_listener() {\n          return ctx.sortBooksByField(\"title\");\n        });\n        i0.ɵɵtext(22, \" Title \");\n        i0.ɵɵelement(23, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\");\n        i0.ɵɵtext(25, \"Description \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"th\", 5);\n        i0.ɵɵlistener(\"click\", function BookShelfComponent_Template_th_click_26_listener() {\n          return ctx.sortBooksByField(\"pageCount\");\n        });\n        i0.ɵɵtext(27, \" Page Count \");\n        i0.ɵɵelement(28, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"th\", 5);\n        i0.ɵɵlistener(\"click\", function BookShelfComponent_Template_th_click_29_listener() {\n          return ctx.sortBooksByField(\"publishDate\");\n        });\n        i0.ɵɵtext(30, \" Publish Date \");\n        i0.ɵɵelement(31, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"th\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"tbody\");\n        i0.ɵɵtemplate(34, BookShelfComponent_ng_container_34_Template, 2, 1, \"ng-container\", 12);\n        i0.ɵɵtemplate(35, BookShelfComponent_ng_template_35_Template, 1, 1, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(8);\n\n        const _r2 = i0.ɵɵreference(36);\n\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedDateRange)(\"bsDatepicker\", _r0)(\"bsConfig\", ctx.bsConfig);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchText);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c0, ctx.sortDirection === \"asc\", ctx.sortDirection === \"desc\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(12, _c0, ctx.sortDirection === \"asc\", ctx.sortDirection === \"desc\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(15, _c0, ctx.sortDirection === \"asc\", ctx.sortDirection === \"desc\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.searchText === \"\")(\"ngIfElse\", _r2);\n      }\n    }\n  });\n  return BookShelfComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}